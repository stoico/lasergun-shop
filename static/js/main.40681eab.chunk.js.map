{"version":3,"sources":["static/images/avatar.svg","reducers/products.js","reducers/comments.js","reducers/index.js","actions/fetchProducts.js","components/ProductList.js","components/Comment.js","components/CommentSection.js","components/ProductItem.js","App.js","index.js"],"names":["module","exports","products","state","action","type","productData","comments","commentData","commentsInLocalStorage","combinedReducer","combineReducers","fetchProductsSuccess","fetchProductsFail","error","fetchDataAsync","dispatch","a","async","fetch","response","json","ProductList","props","componentDidMount","currency","euro","swissFranc","this","className","map","product","index","to","id","key","src","images","thumb","alt","title","price","React","Component","mapDispatchToProps","connect","Comment","comment","avatar","author","text","CommentSection","useState","commentText","setCommentText","commentAuthor","setCommentAuthor","setCommentData","useDispatch","allComments","useSelector","filter","useEffect","length","window","localStorage","setItem","JSON","stringify","getItem","parse","console","log","value","onChange","event","target","placeholder","onClick","ProductItem","history","useHistory","selectedImageURL","setSelectedImageURL","useParams","Number","eachProduct","original","goBack","image","description","specification","App","path","children","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.40681eab.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avatar.34601718.svg\";","const products = (state = [], action) => {\n  switch (action.type) {\n    case 'FETCH_PRODUCTS_SUCCESSFUL':\n      return action.productData\n    case 'FETCH_PRODUCTS_FAILED':\n      return state\n    default:\n      return state\n  }\n}\n\nexport default products\n","const comments = (state = [], action) => {\n  switch (action.type) {\n    case 'ADD_COMMENT':\n      return [\n        ...state,\n        action.commentData\n      ]\n    case 'INITILIZE_FROM_LOCAL_STORAGE':\n      return [\n        ...action.commentsInLocalStorage\n      ]\n    default:\n      return state\n  }\n}\n\nexport default comments\n","import { combineReducers } from 'redux'\nimport products from './products'\nimport comments from './comments'\n\nconst combinedReducer = combineReducers({ products, comments })\n\nexport default combinedReducer\n","/* eslint-disable no-undef */\nexport const fetchProductsSuccess = (productData) => ({\n  type: 'FETCH_PRODUCTS_SUCCESSFUL',\n  productData\n})\n\nexport const fetchProductsFail = (error) => ({\n  type: 'FETCH_PRODUCTS_FAILED',\n  error\n})\n\nexport function fetchDataAsync () {\n  return async (dispatch) => {\n    try {\n      const response = await fetch('http://private-5815fe-recommendationsknip.apiary-mock.com/products')\n      const productData = await response.json()\n      dispatch(fetchProductsSuccess(productData))\n    } catch (error) {\n      dispatch(fetchProductsFail(error))\n    }\n  }\n}\n","/* eslint-disable react/prop-types */\nimport React from 'react'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { fetchDataAsync } from '../actions/fetchProducts'\nimport './ProductList.css'\n\nclass ProductList extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      currency: {\n        euro: '€',\n        swissFranc: 'CHF'\n      }\n    }\n  }\n\n  componentDidMount = () => {\n    this.props.fetchDataAsync()\n  }\n\n  render () {\n    const { products } = this.props\n    const productURLString = '/product/'\n    return (\n      <div className='container'>\n        <h1 className='container-title'>Product List</h1>\n        {products.map((product, index) => {\n          return (\n            <Link to={productURLString + product.id} key={index}>\n              <div className='product-item'>\n                <div className='product-image-thumb'><img src={product.images[0].thumb} alt={product.title} /></div>\n                <div className='product-item-title'>{product.title}</div>\n                <div className='product-item-price'>{this.state.currency.euro} {product.price}</div>\n              </div>\n            </Link>)\n        })}\n      </div>\n    )\n  }\n}\n\nconst mapState = (state) => {\n  return {\n    products: state.products\n  }\n}\n\nconst mapDispatchToProps = { fetchDataAsync }\n\nexport default connect(\n  mapState,\n  mapDispatchToProps\n)(ProductList)\n","import React from 'react'\nimport { PropTypes } from 'prop-types'\n\nimport avatar from '../static/images/avatar.svg'\nimport './CommentSection.css'\nimport './ProductList.css'\nimport './ProductItem.css'\n\nconst Comment = ({ comment, index }) => {\n  return (\n    <div className='comment-box' key={index}>\n      <div className='comment-author-section'>\n        <span className='avatar-placeholder'><img src={avatar} alt='Profile icon' /></span>\n        <div className='comment-author'>{comment.author}</div>\n      </div>\n      <p>{comment.text}</p>\n    </div>\n  )\n}\n\nComment.propTypes = {\n  comment: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired\n}\n\nexport default Comment\n","import React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { PropTypes } from 'prop-types'\n\nimport Comment from './Comment'\nimport './CommentSection.css'\nimport './ProductList.css'\nimport './ProductItem.css'\n\nconst CommentSection = ({ id }) => {\n  const [commentText, setCommentText] = useState('')\n  const [commentAuthor, setCommentAuthor] = useState('')\n  const [commentData, setCommentData] = useState({ id: id, author: commentAuthor, text: commentText })\n\n  const dispatch = useDispatch()\n  const allComments = useSelector((state) => state.comments)\n\n  const comments = useSelector((state) => state.comments.filter((comment) => comment.id === id))\n\n  const onAuthorChange = (event) => {\n    setCommentAuthor(event.target.value)\n  }\n\n  const onTextChange = (event) => {\n    setCommentText(event.target.value)\n  }\n\n  const sendComment = () => {\n    // Make sure the user has typed something\n    if (commentText.length && commentAuthor.length) {\n      dispatch({ type: 'ADD_COMMENT', commentData })\n    }\n  }\n\n  useEffect(() => {\n    setCommentData({ id: id, author: commentAuthor, text: commentText })\n    setCommentData({ id: id, author: commentAuthor, text: commentText })\n  }, [id, commentAuthor, commentText])\n\n  useEffect(() => {\n    if (commentText.length && commentAuthor.length) {\n      // Persist data in localStorage\n      window.localStorage.setItem('allComments', JSON.stringify(allComments))\n    }\n  }, [commentText, commentAuthor, allComments])\n\n  useEffect(() => {\n    // Retrieve data from localStorage and dispatch it to Redux\n    // Run only once\n    if (window.localStorage.getItem('allComments')) {\n      const commentsInLocalStorage = JSON.parse(window.localStorage.getItem('allComments'))\n      console.log('commentsInLocalStorage')\n      console.log(commentsInLocalStorage)\n      dispatch({ type: 'INITILIZE_FROM_LOCAL_STORAGE', commentsInLocalStorage })\n    }\n  }, [])\n\n  console.log('comments')\n  console.log(comments)\n\n  return (\n    <div className='container comment'>\n      <div className='product-heading'>\n        <div className='comment-heading'>Comments</div>\n      </div>\n      {comments.map((comment, index) =>\n        <Comment comment={comment} index={index} key={index} />\n      )}\n      <hr />\n      <label>Name</label>\n      <input className='comment-input author' value={commentAuthor} type='text' onChange={onAuthorChange} placeholder='Name' />\n      <label>Leave a comment</label>\n      <input className='comment-input text' value={commentText} type='text' onChange={onTextChange} placeholder='Thoughts on this gadget?' />\n      <button className='send-comment' onClick={sendComment}>Shoot it!</button>\n    </div>\n  )\n}\n\nCommentSection.propTypes = {\n  id: PropTypes.number.isRequired\n}\n\nexport default CommentSection\n","import React, { useEffect, useState } from 'react'\nimport { useParams, useHistory } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { fetchDataAsync } from '../actions/fetchProducts'\n\nimport './ProductList.css'\nimport './ProductItem.css'\nimport CommentSection from './CommentSection'\n\nconst ProductItem = () => {\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const [selectedImageURL, setSelectedImageURL] = useState('')\n  // Get product ID param passed in the URL\n  let { id } = useParams()\n  // Param is passed as a String,\n  // convert to Number\n  id = Number(id)\n\n  // Get the first product of the array that matches the URL paramater\n  let [product] = useSelector((state) => state.products.filter((eachProduct) => eachProduct.id === id))\n\n  if (!product) {\n    const products = dispatch(fetchDataAsync())\n\n    try {\n      product = products.filter((eachProduct) => eachProduct.id === id)\n    } catch (error) {\n\n    }\n  }\n\n  useEffect(() => {\n    if (product) {\n      setSelectedImageURL(product.images[0].original)\n    }\n  }, [product])\n\n  if (product) {\n    return (\n      <>\n        <div className='container'>\n          <div className='heading'>\n            <div className='go-back'><button onClick={() => history.goBack()} type='button'>⟵</button></div>\n            <div className='product-heading'>{product.title}</div>\n            <div className='price'>\n              €\n              {' '}\n              {product.price}\n            </div>\n          </div>\n          <div className='image-displayed'>\n            <img src={selectedImageURL} alt={`${product.title}`} />\n          </div>\n          <div className='gallery'>\n            {product.images.map((image, index) => (\n              <img\n                key={index}\n                src={image.thumb}\n                className={selectedImageURL === image.original ? 'selected-image' : null}\n                onClick={() => setSelectedImageURL(image.original)}\n                alt={`${product.title} - ${index}`}\n              />\n            ))}\n          </div>\n          <div className='description'>\n            <h3>Description</h3>\n            <p>\n              {product.description}\n            </p>\n          </div>\n          <div className='specification'>\n            <h3>Specification</h3>\n            <p>\n              {product.specification}\n            </p>\n          </div>\n        </div>\n        <CommentSection id={id} />\n      </>\n    )\n  }\n\n  return (\n    <div className='container' />\n  )\n}\n\nexport default ProductItem\n","import React from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom'\n\nimport ProductList from './components/ProductList'\nimport ProductItem from './components/ProductItem'\n\nfunction App () {\n  return (\n    <Router>\n      <Switch>\n        <Route path='/product/:id' children={<ProductItem />} />\n        <Route path='/'>\n          <ProductList />\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { createStore, applyMiddleware } from 'redux'\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\nimport combinedReducer from './reducers/index'\n\nimport './index.css'\nimport App from './App'\n\nconst store = createStore(combinedReducer, applyMiddleware(thunk))\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}